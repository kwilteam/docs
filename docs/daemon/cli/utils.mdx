---
sidebar_position: 3
sidebar_label: "Utils"
id: daemon-cmdline-utils
title: Utils Subcommand
description: Kwild Utils Command Line
slug: /daemon/cmdline/utils
---

Utils commands provides tools to generate & view required configuration for running a kwild node or a network. 

```bash
kwild utils --help 

utils is a command that contains tools to generate and view files required for kwil network

Usage:
  kwild utils [command]

Available Commands:
  gen-private-key  Generates ed25519 private key and shows the pubkey, CometBFT address, and node ID for the generated private key.
  genesis-hash     Generates genesis hash of the sqlite db and if genesis file provided, updates the app_hash in the genesis file
  init             Initializes files required for a kwil node
  key-info         Show the pubkey, CometBFT address, and Node ID for an Ed25519 private key.
  reset-state      (unsafe) Remove all the data and WAL, for testing purposes only
  testnet          Initializes the files required for a kwil test network
  unsafe-reset-all (unsafe) Remove all the blockchain's data and WAL, reset this node's validator to genesis state, for testing purposes only

Flags:
  -h, --help   help for utils

Global Flags:
      --config string   kwild config file

Use "kwild utils [command] --help" for more information about a command.
```

### Kwil Node Initialization

To run a kwild node, you require a private key, a config.toml, and a genesis file. All these necessary configuration files required to run a single instance of kwild node can be auto-generated using the init subcommand.

```bash
kwild utils init --help
Initializes files required for running a kwild server

Usage:
  kwild utils init [flags]

Flags:
  -h, --help                 help for init
  -i, --initial-height int   initial height of the first block
  -o, --output-dir string    directory to
   store initialization data for the node (default ".kwild")

Global Flags:
      --config string   kwild config file
```

Example: `kwild utils init -o "path/to/output/dir"` would generate the required configuration in the directory "path/to/output/dir"


### Testnet Initialization

```bash
kwild utils testnet --help 

testnet will create "v + n" number of directories and populate each with
necessary files (genesis, config and populate them with the keys etc.).

Note, strict routability for addresses is turned off in the config file.
Optionally, it will fill in persistent_peers list in config file using either hostnames or IPs.

Example:
        kwild testnet --v 4 --o ./output --populate-persistent-peers --starting-ip-address 192.168.10.2

Usage:
  kwild utils testnet [flags]

Aliases:
  testnet, net

Flags:
      --config string                config file to use (note some options may be overwritten)
  -h, --help                         help for testnet
      --hostname stringArray         manually override all hostnames of validators (use --hostname multiple times for multiple hosts)Example: --hostname '192.168.10.10' --hostname: '192.168.10.20'
      --hostname-prefix string       hostname prefix ("node" results in persistent peers list ID0@node0:26656, ID1@node1:26656, ...) (default "node")
      --hostname-suffix string       hostname suffix (".xyz.com" results in persistent peers list ID0@node0.xyz.com:26656, ID1@node1.xyz.com:26656, ...)
      --initial-height int           initial height of the first block
      --node-dir-prefix string       prefix the directory name for each node with (node results in node0, node1, ...) (default "node")
  -n, --non-validator-num int        number of non validators to initialize the testnet with (default 4)
  -o, --output-dir string            directory to store initialization data for the testnet (default ".testnet")
      --p2p-port int                 P2P Port (default 26656)
      --populate-persistent-peers    update config of each node with the list of persistent peers build using either hostname-prefix or starting-ip-address (default true)
      --starting-ip-address string   starting IP address ("192.168.0.1" results in persistent peers list ID0@192.168.0.1:26656, ID1@192.168.0.2:26656, ...)
  -v, --validator-num int            number of validators to initialize the testnet with (default 4)

Global Flags:
      --config string   kwild config file
```

** Usage:**

#### Create 2 Validators with ip addresses starting from 192.168.10.2
```bash
kwild testnet -v 2 -o "path/to/output/dir" --populate-persistent-peers --starting-ip-address 192.168.10.2
```
This command would generate config.toml, genesis.json and cryptographic key pairs for 2 validator nodes of ip addresses 192.168.10.2 and 192.168.10.3. 
The Genesis file is created with both these validators as the initial validators
This command also updates the persistent_peers in the config.toml to `persistent_peers:  "nodeid1@192.168.10.2:26656,nodeid2@192.168.10.3:26656"`


#### Create 2 Validators with specific ip addresses 
``` bash
kwild testnet -v 2 -o "path/to/output/dir" --populate-persistent-peers --hostname '192.168.10.10' --hostname: '192.168.10.20'
```
This command would generate config.toml, genesis.json and cryptographic key pairs for 2 validator nodes of ip addresses 192.168.10.10 and 192.168.10.20.
The Genesis file is created with both these validators as the initial validators
This command also updates the persistent_peers in the config.toml to `persistent_peers:  "nodeid1@192.168.10.10:26656,nodeid2@192.168.10.20:26656"`


#### Create 1 Validator and 1 non-validator
``` bash
kwild testnet -v 1 -n 1 -o "path/to/output/dir" --populate-persistent-peers --hostname '192.168.10.10' --hostname: '192.168.10.20'

(or)

kwild testnet -v 1 -n 1 -o "path/to/output/dir" --populate-persistent-peers --starting-ip-address 192.168.10.2
```
This command would generate config.toml, genesis.json and cryptographic key pairs for 1 validator nodes and 1 non-validator node. 
Only the validator node's info is listed as initial validator in the genesis file 
This command would also populate the persistent_peers in the config.toml file.



### Create Genesis Hash
For scenarios where we are bootstrapping a network with non empty database state, app_hash for this database can be generated using the genesis-hash utility.
```bash
kwild utils genesis-hash --help
Generates genesis hash of the sqlite db and if genesis file provided, updates the app_hash in the genesis file.
If genesis file is not provided, only the genesis hash is printed to stdout.

Usage:
  kwild utils genesis-hash [db-dir] [flags]

Flags:
      --genesis-file string   genesis file to update the app_hash in
  -h, --help                  help for genesis-hash

Global Flags:
      --config string   kwild config file

```


**Usage:**


```bash
kwild utils genesis-hash "path/to/db/dir"
```
Generates and prints the app_hash generated for the database located at db-dir-path


```bash
kwild utils genesis-hash "path/to/db/dir" --genesis-file "path/to/my/genesis.json"
```

If genesis file is provided, app_hash in the genesis file is updated with the generated hash of the initial database state


### Generate Private key
```bash
kwild utils gen-private-key

Private key (hex): 4a9b9ba077993ff3f163bd86cfe5bf60fc1249b44c5ad70a9698ccd5c1bf60c088523e05b304f2c5136342634fb866fcb41043d0dc1598b59837fe731d0ffa2c
Private key (base64): SpuboHeZP/PxY72Gz+W/YPwSSbRMWtcKlpjM1cG/YMCIUj4FswTyxRNjQmNPuGb8tBBD0NwVmLWYN/5zHQ/6LA==
Public key (base64): iFI+BbME8sUTY0JjT7hm/LQQQ9DcFZi1mDf+cx0P+iw=
Public key (cometbft hex): PubKeyEd25519{88523E05B304F2C5136342634FB866FCB41043D0DC1598B59837FE731D0FFA2C}
Address (string): 417961B2A02F9F5C805CE687456528B92D135554
Node ID: 417961b2a02f9f5c805ce687456528b92d135554
```
This command generates a ed25519 private key and displays public key, address and node Id in different formats


### Display key info
```bash
kwild utils key-info [privatekey(hex)]
```
Given a hex encoded private key (privatekey in the config.toml), this command would display the key info such as public key, address and nodeId



### Reset commands

`kwild unsafe-reset-all` and `kwild reset-state` are unsafe commands and not to be used in the production. These commands requires the config file to be passed through the `--config` flag

`kwild reset-state`: resets the blockchain state present in the db_dir directory (in config.toml)

`kwild unsafe-reset-all` resets the entire node state