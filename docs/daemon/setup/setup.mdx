---
sidebar_position: 1
sidebar_label: "Setup"
id: daemon-setup
title: Setup
description: Setting up Kwild node
slug: /daemon/setup
---

This guide provides step-by-step instructions for configuring and launching a single instance of a kwild node. It covers both on initializing the node as a genesis node and to join an existing network of kwild nodes during startup.

Running a kwild node requires a private key for the node, genesis file and a configuration file. 
See [config.toml specification](../configuration/configuration.mdx), [genesis specification](../configuration/genesis.mdx) and [generate private key](../cli/utils.mdx#generate-private-key) for more details on the node configuration.

## Home directory structure
This is the default directory to store the all the data such as blockchain data, sqldb data, signed messages etc, unless otherwise specified.
```
home_dir/
   |- config.toml            
   |- abci/                     # cometbft home directory
   |   |- config/
   |   |   |- genesis.json   
   |   |- data/ 
```
home_dir can be specified either using the `--home_dir` flag during server start or by setting the `home_dir` config in the config.toml file. 
The data storage locations can be overwritten either by using `genesis_file, db_dir, sqlite_file_path` configs in config.toml to overwrite the data storage locations, these configs can also be specified through cmd line flags during server start and take preference over the ones in the config.toml file.

All these configs can use either absolute paths or relative paths. If relative paths are used, sqlite_file_path should be relative to home_dir, whereas the chain specific configs such as genesis and db_dir should be relative to the cometbft home dir i.e `home_dir/abci`

### Initialization
The home directory `home_dir` can be initialized with the default configuration files using the kwild command line as below.

```bash
kwild utils init -o "path/to/home/dir"
```

This command will generate the config.toml and genesis.json files using default settings. Additionally, it creates cryptographic key pairs and populates the configuration files with these keys.

If you wish to modify any specific settings, you have the option to manually edit these configuration files or utilize flags when running `kwild server start` to override the existing configurations while starting the server. Refer [server flags](../cli/server.mdx) and [config usage](../configuration/configuration.mdx) to get more information of all the flags supported.


### Running a genesis kwild node
Once the required configuration is generated and updated, the kwild server can be started as follows:

#### Configure using a config.toml file
```bash 
kwild server start --config "path/to/my/config.toml"
```

#### Configure using flags 
private_key and home_dir are required for running a server.

```bash
kwild server start --app.private_key 20825f3eddf9b7f334cfce30dac8d03931965a6a305f7e62185db026d34198ccdfed8973a7c385a320528a7b131418fc57813ae8841dacc0cc6ecf34631f4409 --home "/tmp/.kwild/"
```

#### Configure using both config.toml file and the flags
When both config.toml and flags are used, the flags take precedence over the configurations in the config.toml file.

```bash
`kwild server start --config "config-file-path" --home "/tmp/.kwild" --chain.p2p.laddr "tcp:192.168.1.10:26656"`
```



### Connecting to other peers on the kwil network

To connect a kwil node to the existing network during startup:

1. Replace the genesis file with that of the network's genesis file.

2. Update the p2p.persistent_peers with the peer address set either in the config.toml or through the cmdline flag --chain.p2p.persistent_peers. 
    
    persistent_peers is essentially a comma separated string of `nodeid@ip:port` of peers of the existing kwil network you want to connect to.

    ```bash title="--p2p.persistent_peers cmdline flag"
    kwild server start --p2p.persistent_peers "d128266b8b9f64c313de466cf29e0a6182dba54d@172.10.100.2:26656,9440f4a8059cf7ff31454973c4f9c68de65fe526@172.10.100.3:26656"
    ```

    (or)

    ```bash title="persistent_peers option in config.toml"
    [chain.p2p]
    persistent_peers = "d128266b8b9f64c313de466cf29e0a6182dba54d@172.10.100.2:26656,9440f4a8059cf7ff31454973c4f9c68de65fe526@172.10.100.3:26656"
    ```

