---
sidebar_position: 1
sidebar_label: "Configuration"
id: daemon-config
title: Configuration
description: How to configure the Kwil Daemon
slug: /daemon/config/
---

This section outlines the complete set of configurations available for the operation of a kwild node. The configurations are categorized into two distinct types: chain-specific configurations that pertain to the underlying blockchain functionality, and app-specific configurations that govern the behavior of kwild application. 

To start a kwild server, these configurations should be provided either using a config.toml or through cmdline flags or both (in which case, flags take precedence). See [setup instructions](../setup/setup.mdx) for more details on different ways to run a kwild node.

Lets take a look into the different sections of the config. 


## home_dir
- `home_dir`:  This variable is used to specify the default directory to store the all the data such as blockchain data, sqldb data etc. Configurations such as sqlite_file_path for sqldb, db_dir for blockchain data provide more granular control in deciding where to store that particular data.

## logging

- `LOG_LEVEL`: This variable sets the logging level of the daemon. The default level is info.

- `LOG_OUTPUT_PATHS`: This variable sets the output paths for logs. Multiple paths can be specified, separated by commas. By default, logs are written to stdout.

- `LOG_FORMAT`: This variable sets the logging format. Supports 'plain' or 'json'.

## app
This section contains configuration specific to the operation of kwild application.

- `private_key`: This variable is used to store a cryptographic private key (hex format). This is a required field to run the node.

- `grpc_listen_addr`: This variable sets the address at which the gRPC server of the daemon listens for connections. The default value is :50051.

- `http_listen_addr`: This variable sets the address at which the HTTP server of the daemon listens for connections. The default value is :8080.

- `sqlite_file_path`: This variable sets the file path for all SQLite files. If not provided, it defaults to data/kwil.db/ under the specified home_dir.

- `without_gas_costs`: This variable sets whether gas costs should be enabled for the transactions. By default, gas costs are disabled, resulting in no fees incurred for each transaction.

- `without_nonces`: This variable sets whether nonces should be enabled for the transactions. By default nonces are enabled for the transactions.

- `extension_endpoints`: This variable defines endpoints for extensions. Multiple endpoints can be specified, separated by commas.

- `tls_cert_file`: This variable sets the path to a file containing certificate that is used to create the HTTPS RPC server. The path can be either an absolute path or path relative to the configured home_dir. If not provided, only http server would be created.

- `tls_key_file`: This variable sets the path to a file containing matching private key that is used to create the HTTPS RPC server. The path can be either an absolute path or path relative to the configured home_dir. If not provided, only http server would be created.

- `hostname`: This variable sets the kwild server hostname.

### snapshots
This subsection provides configuration required to support and maintain sqlite db snapshots.

- `enabled`: This variable sets whether to enable snapshots on the kwild node.

- `snapshot_dir`: This variable sets the directory where the snapshots are to be stored. Can be absolute or relative to the kwild root directory.

- `snapshot_heights`: This variable sets the heights at which the snapshots are to be taken. Default height is 10000 blocks, this implies that a snapshot of the kwil db database is taken for every 10k blocks.

- `max_snapshots`: Maximum number of snapshots to be kept in the snapshot_dir. If max limit is reached, the oldest would be deleted and replaced by the latest snapshot.


## chain:
This section contains configuration specific to cometbft based blockchain.

- `moniker`: This variable sets a custom human-readable name for the node.

### rpc
This subsection contains the configuration required to manage blockchain's rpc service.

- `laddr`: This variable sets the TCP or UNIX socket address for the RPC server to listen on. Default listening address is on "tcp://127.0.0.1:26657"

- `timeout_broadcast_tx_commit`: This variable sets the time to wait for a transaction to be committed during */broadcast_tx_commit*. Default timeout is 10s.

### consensus
This subsection describes the configuration to manage consensus.

- `timeout_propose`: This variable sets the time to wait for a proposal block before prevoting nil. Default timeout is 3s.

- `timeout_prevote`: This variable sets the time to wait after receiving +2/3 prevotes for "anything". Default timeout is 1s.

- `timeout_precommit`: This variable sets the time to wait after receiving +2/3 precommits for "anything". Default timeout is 1s.

- `timeout_commit`: This variable sets the time to wait after committing a block before starting on the new height. Default timeout is 1s.

### p2p
This subsection describes the configuration to manage the p2p service handling peer connectivity between the nodes in the blockchain network.

- `laddr`: This variable sets the Address to listen for incoming connections. Default listening address is "tcp://0.0.0.0:26656".

- `external_address`: This variable sets the Address to advertise to peers for them to dial. If empty, will use the same port as the laddr, and will introspect on the listener.

- `persistent_peers`: This variable sets the Comma-separated list of nodes to connect to and maintain persistent connections. This is a required field for a new node to connect to the kwild network.

- `addr_book_strict`: Toggle for strict address routability rules.

- `max_num_inbound_peers`: This variable sets the Maximum number of inbound peers.

- `max_num_outbound_peers`: This variable sets the Maximum number of outbound peers to connect to, excluding persistent peers.

- `unconditional_peer_ids`: This variable sets the List of node IDs for which connections will be (re)established irrespective of the max connections.

- `allow_duplicate_ip`: This variable sets the Toggle to disable guard against peers connecting from the same IP.

### mempool
This subsection describes the configuration to manage blockchain's transaction mempool.

- `size`: This variable sets the Maximum number of transactions in the mempool.

- `max_txs_bytes`: This variable sets the Limit on the total size of all transactions in the mempool.

- `cache_size`: This variable sets the Size of the cache used to filter transactions seen earlier.

### statesync
This subsection describes the configuration for supporting statesync. 

- `enable`: Toggle to enable state sync based rapid bootstrapping.

- `rpc_servers`: This variable sets the rpc servers for light client verification and state data retrieval.

- `temp_dir`: This variable sets the temporary directory for storing state sync snapshot chunks.

- `discovery_time`: This variable sets the time to spend discovering snapshots before initiating a restore.

- `chunk_request_timeout`: This variable sets the timeout duration before re-requesting a chunk.


This is the structure in which these configs must appear in the config.toml file. Here is a sample [config.toml](./default_config.toml) for reference. 

## Flags
All these fields can also be configured using flags via dot notation during the kwild server start. For example, to update max_snapshots, a config under the 'app' section and 'snapshots' subsection, the field can be updated through flag app.snapshots.max_snapshots.

```bash
kwild server start --app.snapshots.max_snapshots 10
```
