---
sidebar_position: 1
sidebar_label: "Configuration"
id: daemon-config
title: Configuration
description: How to configure the Kwil Daemon
slug: /daemon/config/
---

This section outlines the complete set of configurations available for the operation of a kwild node. The configurations are categorized into three distinct types: chain-specific configurations that pertain to the underlying blockchain functionality, app-specific configurations that govern the behavior of kwild application and logging. 

Lets take a look into the different sections of the config. 

## logging

- `level`: This variable sets the logging level of the daemon. The default level is info.

- `output_paths`: This variable sets the output paths for logs. Multiple paths can be specified, separated by commas. By default, logs are written to stdout.

- `format`: This variable sets the logging format. Supports 'plain' or 'json'.

- `time_format`: This variables sets the time format for logs. Available options are **epochfloat** (default), **epochmilli**, or **rfc3339milli**.

## app   
This section contains configuration specific to the operation of kwild application.

- `grpc_listen_addr`: This variable sets the address at which the gRPC server of the daemon listens for connections. The default value is :50051.

- `http_listen_addr`: This variable sets the address at which the HTTP server of the daemon listens for connections. The default value is :8080.

- `sqlite_file_path`: This variable sets the file path for all SQLite files. If not provided, it defaults to `data/kwil.db/` under the specified root_dir.

- `extension_endpoints`: This variable defines endpoints for extensions. Multiple endpoints can be specified, separated by commas.

- `tls_cert_file`: This variable sets the path to a file containing certificate that is used to create the HTTPS RPC server. The path can be either an absolute path or path relative to the configured home_dir. If not provided, only http server would be created. 

- `tls_key_file`: This variable sets the path to a file containing matching private key that is used to create the HTTPS RPC server. The path can be either an absolute path or path relative to the configured home_dir. If not provided, only http server would be created.

- `hostname`: This variable sets the kwild server hostname.

## chain:
This section contains configuration specific to cometbft based blockchain.

- `moniker`: This variable sets a custom human-readable name for the node.

### rpc
This subsection contains the configuration required to manage blockchain's rpc service.

- `laddr`: This variable sets the TCP or UNIX socket address for the RPC server to listen on. Default listening address is on "tcp://127.0.0.1:26657"

- `timeout_broadcast_tx_commit`: This variable sets the time to wait for a transaction to be committed during */broadcast_tx_commit*. Default timeout is 10s.

### consensus
This subsection describes the configuration to manage consensus.

- `timeout_propose`: This variable sets the time to wait for a proposal block before prevoting nil. Default timeout is 3s.

- `timeout_prevote`: This variable sets the time to wait after receiving +2/3 prevotes for "anything". Default timeout is 1s.

- `timeout_precommit`: This variable sets the time to wait after receiving +2/3 precommits for "anything". Default timeout is 1s.

- `timeout_commit`: This variable sets the time to wait after committing a block before starting on the new height. Default timeout is 1s.

### p2p
This subsection describes the configuration to manage the p2p service handling peer connectivity between the nodes in the blockchain network.

- `laddr`: This variable sets the Address to listen for incoming connections. Default listening address is "tcp://0.0.0.0:26656".

- `external_address`: This variable sets the Address to advertise to peers for them to dial. If empty, will use the same port as the laddr, and will introspect on the listener.

- `persistent_peers`: This variable sets the Comma-separated list of nodes to connect to and maintain persistent connections. This is a required field for a new node to connect to the kwild network.

- `addr_book_strict`: Toggle for strict address routability rules.

- `max_num_inbound_peers`: This variable sets the Maximum number of inbound peers.

- `max_num_outbound_peers`: This variable sets the Maximum number of outbound peers to connect to, excluding persistent peers.

- `unconditional_peer_ids`: This variable sets the List of node IDs for which connections will be (re)established irrespective of the max connections.

- `allow_duplicate_ip`: This variable sets the Toggle to disable guard against peers connecting from the same IP.

### mempool
This subsection describes the configuration to manage blockchain's transaction mempool.

- `size`: This variable sets the Maximum number of transactions in the mempool.

- `max_txs_bytes`: This variable sets the Limit on the total size of all transactions in the mempool.

- `cache_size`: This variable sets the Size of the cache used to filter transactions seen earlier.

This is the structure in which these configs must appear in the config.toml file. Here is a sample [config.toml](./default_config.toml) for reference. 

## Config Override
All the configs in config.toml can be overwritten either using the env variables or the command line flags while starting the node.  

The order of precedence: `flags > env variables > config.toml > defaults`. 

These configs can be translated into env variables or flags using the below rules: 


:::note
``` title=config.toml
[section]
   field1 = val1
[section.subsection]
   field2 = val2
```
The flag and env variables for field1 & field2 are as follows:
```
All environment variables corresponding to the configs are prefixed by "KWILD_"
Env variable:
- KWILD_SECTION_FIELD1
- KWILD_SECTION_SUBSECTION_FIELD2

Flags:
- section.field1
- section.subsection.field2
```
:::

For example, to overwrite the log level config during the startup:
```bash title="Env variable"
KWILD_LOG_LEVEL=debug

kwild --root_dir "path/to/root/dir"
```

```bash title="Command line flag"
kwild --root_dir "path/to/root/dir" --log.level "debug"
```

```bash title="Both env and cmdline flags"
KWILD_LOG_LEVEL=debug

kwild --root_dir "path/to/root/dir" --log.level "info"
```
If both flags and env variables are set, flags take precedence over environment variables.

