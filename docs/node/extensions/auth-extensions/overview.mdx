---
sidebar_position: 1
sidebar_label: "Overview"
id: auth-ext-overview
title: Authentication Extensions Overview
description: How to build Authentication Extensions in Go
slug: /extensions/authentication/overview
---

Authentication Extensions allow you to customize the digital signature type used to authenticate user accounts on your Kwil network. By default, Kwil networks support Secp256k1 and Ed25519 signatures. However, you can build an Authentication Extension to support any signature type you want.

Authentication extensions are useful because they allow you to build Kwil networks that are compatible with multiple different blockchain ecosystems. For example, you could build a Kwil network that supports Ethereum signatures, Solana signatures, and Arweave signatures.

Authentication extensions are written in Go and use the [`auth`](https://github.com/kwilteam/kwil-db/tree/main/extensions/auth) package in the `extensions/auth` directory.

## `auth` Package

To build an authentication extension, you must call the `RegisterAuthenticator` function and pass the extension name and a struct that implements the `auth.Authenticator` interface.

### auth.Authenticator

The `auth.Authenticator` interface has two methods: `Verifier` and `Identifier`.

```go
type Authenticator interface {
	Verifier

	// Identifier returns the string identifier for a message sender
	Identifier(sender []byte) (string, error)
}
```

#### Verifier

The `Verifier` interface has one method: `Verify`. Verifier is used to verify a signature against a public key and message.

```go
type Verifier interface {
	Verify(sender, msg, signature []byte) error
}
```

- `sender` is the public key of the signer in bytes.
- `msg` is the message that was signed in bytes.
- `signature` is the signature of the message in bytes.

##### Example

:::note
The example below implements the Ed25519 signature type, which is already supported by Kwil. This is just an example to show you how to implement the `auth.Authenticator` interface.
:::

<details>
<summary>ed25519_example.go</summary>

```go title="ed25519_example.go"
package ed25519

import (
    "crypto/ed25519"
    "errors"
    "fmt"

    "github.com/kwilteam/kwil-db/extensions/auth"
)

const (
    // Name is the name of the extension
    Name = "ed25519_example"
    // Singature size
    SignatureSize = ed25519.SignatureSize
)

type Ed25519Authenticator struct{}

func (Ed25519Authenticator) Verify(sender, msg, signature []byte) error {
    if len(signature) != SignatureSize {
        return fmt.Errorf("invalid signature size. expected %d, got %d", SignatureSize, len(signature))
    }

    if !ed25519.Verify(sender, msg, signature) {
        return fmt.Errorf("signature verification failed")
    }

    return nil
}
```

</details>

#### Identifier

The `Identifier` method returns the string identifier for a message sender.

The identifier is the unique identifier for the signer. Identifiers are usually public keys, although they are not required to be. For example, for Ethereum, the identifier is the wallet address in hex format (not the Secp256k1 public key).

```go
Identifier(sender []byte) (string, error)
```

- `sender` is the public key of the signer in bytes.

##### Example

<details>
<summary>ed25519_example.go</summary>

```go title="ed25519_example.go"
package ed25519

import (
    "crypto/ed25519"
    "errors"
    "fmt"
    "hex"

    "github.com/kwilteam/kwil-db/extensions/auth"
)

const (
    // Name is the name of the extension
    Name = "ed25519_example"
    // Signature size
    SignatureSize = ed25519.SignatureSize
)

...
/*
    Code from the previous example
*/
...

func (Ed25519Authenticator) Identifier(publicKey []byte) (string, error) {
    if(len(publicKey) != ed25519.PublicKeySize) {
        return "", fmt.Errorf("invalid public key size. expected %d, got %d", ed25519.PublicKeySize, len(publicKey))
    }

    return hex.EncodeToString(publicKey), nil
}

```

</details>

### RegisterAuthenticator

The `RegisterAuthenticator` function is used to register an authentication extension. It takes the extension name and a struct that implements the `auth.Authenticator` interface.

```go
func RegisterAuthenticator(name string, auth auth.Authenticator) error {}
```

- `name` is the name of the extension.
- `authenticator` is a struct that implements the `auth.Authenticator` interface.

#### Example

<details>
<summary>ed25519_example.go</summary>

```go title="ed25519_example.go"
package ed25519

import (
    "crypto/ed25519"
    "errors"
    "fmt"
    "hex"

    "github.com/kwilteam/kwil-db/extensions/auth"
)

const (
    // Name is the name of the extension
    Name = "ed25519_example"
    // Singature size
    SignatureSize = ed25519.SignatureSize
)

...
/*
    Code from the previous examples
*/

func init() {
    err := auth.RegisterAuthenticator(Name, Ed25519Authenticator{})
    if err != nil {
        panic(err)
    }
}
```

</details>

## Next Steps

- [Using an Authentication Extension](/docs/extensions/authentication/usage) - Learn how to use an authentication extension in a client-side application.
- [Full Authentication Extension Tutorial](/docs/extensions/authentication/tutorial) - Learn how to build, compile, and use an authentication extension in a Kwil network.